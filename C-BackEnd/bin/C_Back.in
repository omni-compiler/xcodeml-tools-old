#!/bin/bash

# $TSUKUBA_Release: Omni OpenMP Compiler 3 $
# $TSUKUBA_Copyright:
#  PLEASE DESCRIBE LICENSE AGREEMENT HERE
#  $

if test -z "${OMNI_HOME}"; then
    OMNI_HOME=@prefix@
fi

CONF="@OM_DRIVER_CONF_DIR@/java.conf"
if [ -r ${CONF} ]; then
  . ${CONF}
fi

OMNI_JAR1="${OMNI_HOME}/share/xcalablemp/om-c-back.jar"
OMNI_JAR2="${OMNI_HOME}/share/xcalablemp/om-common.jar"

if [ -f $OMNI_JAR1 -a -f $OMNI_JAR2 ]; then
    ${OMNI_JAVA} ${OMNI_JAVA_OPTION} -cp ${OMNI_JAR2}:${OMNI_JAR1} xcodeml.c.util.omx2c "$@"
elif [ -f "${OMNI_HOME}/classes/xcodeml/c/util/omx2c.class" ]; then
    export CLASSPATH="${OMNI_HOME}/classes:${OMNI_HOME}/binding/classes:${OMNI_HOME}/../XcodeML-Common/classes"
    ${OMNI_JAVA} ${OMNI_JAVA_OPTION} xcodeml.c.util.omx2c "$@"
else
  echo ${OMNI_JAR1} not found.
  exit 1
fi

